<!doctype html>
<html lang="fr" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Les tests unitaires | Tinaël Devresse</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:locale" content="fr"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="fr"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="fr"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Les tests unitaires | Tinaël Devresse"><meta data-rh="true" name="description" content="L&#x27;article du jour est fait en effort conjoint avec mon ancien collègue et mentor &lt;a href=&quot;https://www.linkedin.com/in/guillaumefaas/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener nofollow&quot;&gt;Guillaume Faas&lt;/a&gt; sous la forme d&#x27;une conversation entre 2 développeurs. Joins-toi à moi pour le remercier pour son incroyable implication dans l&#x27;écriture de cet article! Nous espérons tous les 2 que tu vas l&#x27;adorer, autant que nous avons adoré l&#x27;écrire!"><meta data-rh="true" property="og:description" content="L&#x27;article du jour est fait en effort conjoint avec mon ancien collègue et mentor &lt;a href=&quot;https://www.linkedin.com/in/guillaumefaas/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener nofollow&quot;&gt;Guillaume Faas&lt;/a&gt; sous la forme d&#x27;une conversation entre 2 développeurs. Joins-toi à moi pour le remercier pour son incroyable implication dans l&#x27;écriture de cet article! Nous espérons tous les 2 que tu vas l&#x27;adorer, autant que nous avons adoré l&#x27;écrire!"><meta data-rh="true" property="article:published_time" content="2022-01-01T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="test,test unitaire,programmation"><meta data-rh="true" property="og:url" content="https://tinaeldevresse.eu/fr/blog/unit-testing"><meta data-rh="true" property="og:image" content="https://tinaeldevresse.eu/fr/img/unit-testing.jpg"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="og:site_name" content="tinaeldevresse.eu"><meta data-rh="true" name="twitter:image" content="https://tinaeldevresse.eu/fr/img/unit-testing.jpg"><meta data-rh="true" name="twitter:image:alt" content="Banner image"><link data-rh="true" rel="icon" href="/fr/img/favicon.ico"><link data-rh="true" rel="alternate" href="https://tinaeldevresse.eu/blog/unit-testing" hreflang="en"><link data-rh="true" rel="alternate" href="https://tinaeldevresse.eu/fr/blog/unit-testing" hreflang="fr"><link data-rh="true" rel="alternate" href="https://tinaeldevresse.eu/blog/unit-testing" hreflang="x-default"><link data-rh="true" rel="canonical" href="https://tinaeldevresse.eu/fr/blog/unit-testing"><link rel="alternate" type="application/rss+xml" href="/fr/blog/rss.xml" title="Tinaël Devresse RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/fr/blog/atom.xml" title="Tinaël Devresse Atom Feed">
<link rel="alternate" type="application/json" href="/fr/blog/feed.json" title="Tinaël Devresse JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-167426777-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-167426777-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-167426777-1",{})</script><link rel="stylesheet" href="/fr/assets/css/styles.ce64e108.css">
<script src="/fr/assets/js/runtime~main.61f4cff9.js" defer="defer"></script>
<script src="/fr/assets/js/main.6eca33c3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Aller jusqu&#x27;à contenu principal"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Aller jusqu&#x27;à contenu principal</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like my content, please share it on your social networks! ⭐️</div><button type="button" aria-label="Fermer" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Ouvrir/fermer la barre de navigation" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/fr/"><div class="navbar__logo"><img src="/fr/img/logo.png" alt="td logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/fr/img/logo.png" alt="td logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">tinaeldevresse.eu</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/fr/blog">Blog</a><a class="navbar__item navbar__link" href="/fr/portfolio">Portfolio</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Français</a><ul class="dropdown__menu"><li><a href="/blog/unit-testing" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/fr/blog/unit-testing" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="fr">Français</a></li></ul></div><a href="https://github.com/hunteroi/tinaeldevresse.eu" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Basculer entre le mode sombre et clair (actuellement mode clair)" aria-label="Basculer entre le mode sombre et clair (actuellement mode clair)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Pagination des articles les plus récents du blog"><div class="sidebarItemTitle_pO2u margin-bottom--md">Publications récentes</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/fr/blog/sharing-is-caring">Le partage, c&#x27;est l&#x27;entraide</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/fr/blog/why-did-i-switch-to-clean-architecture">Quelle architecture j&#x27;utilise pour mes projets?</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/fr/blog/unit-testing">Les tests unitaires</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/fr/blog/what-is-a-container">Qu&#x27;est-ce qu&#x27;un conteneur?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/fr/blog/deployment-environments">Environnements de déploiement</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="L&#x27;article du jour est fait en effort conjoint avec mon ancien collègue et mentor &lt;a href=&quot;https://www.linkedin.com/in/guillaumefaas/&quot; target=&quot;_blank&quot; rel=&quot;noreferrer noopener nofollow&quot;&gt;Guillaume Faas&lt;/a&gt; sous la forme d&#x27;une conversation entre 2 développeurs. Joins-toi à moi pour le remercier pour son incroyable implication dans l&#x27;écriture de cet article! Nous espérons tous les 2 que tu vas l&#x27;adorer, autant que nous avons adoré l&#x27;écrire!"><link itemprop="image" href="https://tinaeldevresse.eu/fr/img/unit-testing.jpg"><header><h1 class="title_f1Hy" itemprop="headline">Les tests unitaires</h1><div class="container_mt6G margin-vert--md"><time datetime="2022-01-01T00:00:00.000Z" itemprop="datePublished">1 janvier 2022</time> · <!-- -->28 minutes de lecture</div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><a href="/blog/unit-testing"><figure><img src="https://tinaeldevresse.eu/fr/img/unit-testing.jpg" alt="Tests unitaires" type="image"><figcaption class="legend_Ecw3"></figcaption></figure></a>
<p>L&#x27;article du jour est fait en effort conjoint avec mon ancien collègue et mentor <a href="https://www.linkedin.com/in/guillaumefaas/" target="_blank" rel="noreferrer noopener nofollow">Guillaume Faas</a>
(🔹) sous la forme d&#x27;une interview d&#x27;un développeur.</p>
<p>Joins-toi à moi pour le remercier pour son incroyable implication dans l&#x27;écriture de cet article! Nous espérons tous les deux que tu vas l&#x27;adorer, autant que nous avons adoré l&#x27;écrire.</p>
<!-- -->
<!-- -->
<hr>
<div class="center"><span class="italic">Un simple petit rappel: les opinions exprimées ici sont strictement les miennes. Elles ne représentent pas les opinions ou vues de mon employeur actuel ni aucun des précédents.</span></div>
<hr>
<p><em>tldr; fais des katas en appliquant la méthodologie &quot;Test Driven Development&quot; !</em></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="presentation">Présentation<a href="#presentation" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h2>
<p>🔸 Salut Guillaume! Tu sais te présenter s&#x27;il te plaît?</p>
<p>🔹 Salut Tinaël! Merci de m&#x27;avoir invité à parler sur ton site. Je m&#x27;appelle Guillaume Faas et je suis un expert .NET / Software Craftsman, actuellement employé chez <a href="https://squaremiled.com/" target="_blank" rel="noopener noreferrer">Squaremiled S.A.</a>.
Je développe des logiciels depuis une dizaine d&#x27;années en ayant évolué dans des environnements et secteurs d&#x27;activités variés.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="topic">Le sujet!<a href="#topic" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h2>
<p>🔸 De quoi va-t-on parler aujourd&#x27;hui?</p>
<p>🔹 À ton avis? Tu n&#x27;as pas lu le titre de l&#x27;article on dirait. On va parler de <strong>test unitaire</strong>!</p>
<p class="anchor anchorWithHideOnScrollNavbar_WYt5" id="first-encounter"></p><p>🔸 Quand est-ce que t&#x27;y as touché pour la première fois?</p><a href="#first-encounter" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a><p></p>
<p>🔹 C&#x27;était il y a bien longtemps, dans une galaxie lointaine... J&#x27;avais à peine quelques années d&#x27;expérience à l&#x27;époque. J&#x27;étais dans la même société pendant une majeure partie de ma carrière et, par rapport à mon <em>day-to-day</em>, je pensais que j&#x27;avais déjà tout vu.
Je commençais à regarder en ligne à des <em>guidelines</em>, des <em>best practices</em>, des <em>patterns</em>, etc. Je suis tombé sur plein de sujets excitants et surtout nouveaux.
C&#x27;était comme si j&#x27;avais mis les pieds dans un nouveau monde qui n&#x27;avait rien à voir avec la routine dans laquelle j&#x27;étais ancré. Le <em>testing</em> était évidemment l&#x27;un de ces sujets.
Cependant, j&#x27;ai vite réalisé que je devais progresser sur d&#x27;autres sujets avant d&#x27;être capable d&#x27;introduire des tests. Cela m&#x27;a pris du temps avant que je ne sois vraiment apte à travailler avec une approche <em>test-driven</em>.</p>
<p class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-is-it"></p><p>🔸 Ok! Par contre, histoire de ne pas perdre les lecteurs... tu sais
expliquer ce qu&#x27;est un test unitaire s&#x27;il te plaît?</p><a href="#what-is-it" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a><p></p>
<p>🔹 Oui, bien sûr! Un test unitaire, c&#x27;est un test qui vérifie un <em>unit of code</em>. La notion de <em>unit of code</em> varie en fonction des écoles de testing.
L&#x27;école London (ou Mockist) va voir cela comme le plus petit <em>chunk of code</em>, on parlera d&#x27;une classe ou d&#x27;une méthode. Par contre, l&#x27;école Detroit (ou Classicist) va voir cela comme un <em>behavior</em>, donc un ensemble de classes ou de méthodes.
Pour les plus curieux, voici un <a href="https://medium.com/@adrianbooth/test-driven-development-wars-detroit-vs-london-classicist-vs-mockist-9956c78ae95f" target="_blank" rel="noopener noreferrer">article</a> qui détaille les différences entre les deux écoles.
Je précise qu&#x27;une école n&#x27;est pas meilleure que l&#x27;autre, chacune a ses avantages et inconvénients. C&#x27;est une histoire de préférence et de compromis.
La différence principale tient surtout de la taille de ton <em>System Under Test</em> (SUT) et de la relation entre les différents collaborateurs.</p>
<p>Mais à la fin, un test unitaire est simplement <strong>un morceau de code qui valide qu&#x27;un autre morceau de code a le résultat et/ou <em>side effect</em> attendu par rapport à un scénario donné</strong>.</p>
<p class="anchor anchorWithHideOnScrollNavbar_WYt5" id="hierarchy-position"></p><p>🔸 D&#x27;accord, mais ça se situe où dans la &quot;hiérachie des tests&quot;?</p><a href="#hierarchy-position" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a><p></p>
<p>🔹 Il s&#x27;agit de la pyramide de testing (<em>Agile Testing Pyramid</em>) mais de gauche à droite au lieu de bas en haut. Plus tu seras situé vers la gauche, plus ton <em>scope</em> est petit et plus tes tests seront nombreux et rapides. La logique inverse est appliquée lorsque tu vas dans l&#x27;autre sens.</p>
<p>Nous, on se situe sur la partie &quot;unit&quot; puisque techniquement, il n&#x27;y a pas plus petit qu&#x27;une <em>unit</em>. Un test unitaire doit être exécuté de façon <em>standalone</em> dans un environnement <em>sandbox</em>.
C&#x27;est-à-dire qu&#x27;un test unitaire n&#x27;a aucun impact sur l&#x27;extérieur du test, et si tu en lances plusieurs en parallèle, ils ne doivent pas avoir de <em>side effects</em> entre eux.</p>
<p>Cela signifie donc que dans un test unitaire: on ne contacte pas de DB, on évite de faire une requête HTTP, d&#x27;accéder à un fichier du système, etc. De la même façon, on ne va pas contacter les autres dépendances de la solution.
On reste vraiment &quot;interne&quot; à la fonction.</p>
<figure><img src="https://tinaeldevresse.eu/fr/img/software-testing-types.png" alt="Types de Software Testing" type="image"><figcaption class="legend_Ecw3"></figcaption></figure>
<p>Voici quelques points de la partie <em>functional testing</em>:</p>
<ul>
<li>l&#x27;<em>unit testing</em>, c&#x27;est vérifier qu&#x27;un composant fonctionne bien. Il s&#x27;agit du test le plus rapide, on parlera de <em>fast feedback loop</em> ;</li>
<li>l&#x27;<em>integration testing</em>, c&#x27;est vérifier que plusieurs composants fonctionnent bien entre eux ;</li>
<li>le <em>user acceptance testing</em> qui consiste à vérifier l&#x27;entièreté de l&#x27;application tout en évitant de contacter les dépendances externes (ex: des requêtes vers des fournisseurs de données extérieurs à ton application).
Il s&#x27;agit du test le plus représentatif, probablement celui qui a le plus de valeur à l&#x27;échelle du produit car il vérifie des <em>business requirements</em>.</li>
</ul>
<p>À noter qu&#x27;il n&#x27;y a pas d&#x27;obligation de tous les implémenter. On pourrait très bien avoir une <em>test suite</em> composée uniquement de tests d&#x27;une seule de ces catégories. Mais il convient de garder à l&#x27;esprit que notre <em>test suite</em> ne sera pas des plus efficaces.</p>
<p></p><p>🔸 D&#x27;accord! Mais pourquoi le testing, c&#x27;est pas réalisé dans le monde
professionnel?</p><p></p>
<p>🔹 En réalité, une grande partie des développeurs n&#x27;écrivent pas ou peu de tests. De plus, les tests d&#x27;intégrations sont moins répandus que les tests unitaires car ils sont plus complexes à écrire. Au final, cette tâche est souvent vue comme une corvée ou alors une <em>extra step</em> que l&#x27;on fera uniquement si on a le temps.</p>
<figure><img src="https://tinaeldevresse.eu/fr/img/unit_vs_integration_tests.gif" alt="GIF sur les tests d&#x27;intégration" type="image"><figcaption class="legend_Ecw3"></figcaption></figure>
<p>Uncle Bob en a également parlé à une conférence à Londre en 2018:</p>
<figure><div class="container_KXSz"><iframe type="html" width="560" height="315" src="https://tinaeldevresse.euhttps://www.youtube.com/embed/17vTLSkXTOo?start=552&amp;end=720" title="YouTube video player of SC London Conference 2018" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><figcaption class="legend_Ecw3"></figcaption></figure>
<p class="anchor anchorWithHideOnScrollNavbar_WYt5" id="objective"></p><p>🔸 C&#x27;est quoi le but du testing unitaire et quand est-ce que ça devrait être
appliqué?</p><a href="#objective" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a><p></p>
<p>🔹 Le but est assez simple: c&#x27;est de montrer qu&#x27;une méthode fonctionne comme tu l&#x27;attends. C&#x27;est-à-dire que tu vas avoir un comportement attendu, par exemple ta méthode <code>getSomething</code> doit te retourner quelque chose. Tu vas donc tester différents scénarios et vérifier qu&#x27;elle se comporte toujours de la bonne façon.</p>
<p>Pour ce qui est du &quot;quand&quot;, c&#x27;est encore plus simple: ça doit être appliqué à partir du moment où tu as de la logique quelque part.</p>
<p class="anchor anchorWithHideOnScrollNavbar_WYt5" id="pros-and-cons"></p><p>🔸 Bah du coup, quels en sont les avantages et inconvénients de la mise en
place de tests unitaires?</p><a href="#pros-and-cons" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a><p></p>
<p>🔹 Comme dit précédemment, tu écris du code qui teste du code. Vu comme cela, on dirait surtout une charge de travail supplémentaire sauf qu&#x27;il existe de réels intérêts derrière.</p>
<ol>
<li>Le test unitaire sert de <strong>filet de sécurité contre les régressions</strong>.</li>
</ol>
<p>L&#x27;étape du refactoring intervient systématiquement dans un projet. Le problème étant qu&#x27;à partir du moment où l&#x27;on modifie quelque chose, il y a un risque de <strong>régression</strong>. On parle de régression lorsque quelque chose fonctionnait auparavant et ne fonctionne plus suite à un changement.
C&#x27;est précisement ici que le test intervient: il permet de garantir que tes composants fonctionnent toujours comme attendu. Si jamais quelque chose ne fonctionne plus suite à un changement, la <em>test suite</em> t&#x27;affichera les tests qui ont détecté un problème avec un beau rond rouge. Et ça, du point de vue d&#x27;un développeur, c&#x27;est énorme! Cela veut dire que tu es beaucoup plus serein et que tu passes bien moins de temps à vérifier que tes changements n&#x27;ont pas eu d&#x27;effets indésirables sur le reste des fonctionnalités.</p>
<ol start="2">
<li>L&#x27;écriture de tests améliore la <strong>qualité du code</strong> de ton application.</li>
</ol>
<p>C&#x27;est lié à ce dont on vient d&#x27;aborder. Il est probable que les lecteurs aient déjà rencontré une situation similaire: lorsque l&#x27;on parle de refactoring à un <em>Product Owner</em> ou <em>Product Manager</em>, la première crainte est toujours que quelque chose ne fonctionne plus.
Si tu es couvert par une <em>test suite</em>, tu n&#x27;as pas peur du refactoring. C&#x27;est même l&#x27;inverse, tu es <strong>encouragé à faire du refactoring régulièrement</strong> tout en étant protégé.</p>
<ol start="3">
<li>Une suite de tests devient ce qu&#x27;on appelle une <strong>living documentation</strong>.</li>
</ol>
<p>Lorsque l&#x27;on parle de documentation, on a tous à l&#x27;esprit des commentaires. Le problème est qu&#x27;ils ne sont jamais à jour avec le reste du code. Le code évolue, la documentation non. Par contre, ton test unitaire sera toujours <em>up-to-date</em>. Si ce n&#x27;est pas le cas, alors ta suite de tests ne te donnera pas le feu vert pour aller plus loin.</p>
<p>C&#x27;est d&#x27;autant plus intéressant dans le cadre d&#x27;une arrivée d&#x27;un nouveau développeur sur le projet. Plutôt que de lire tout le code d&#x27;une méthode pour savoir ce qu&#x27;elle fait, il lui suffit de regarder les différents tests de cette méthode. Chaque comportement sera représenté par un test avec un <em>naming</em> explicite sur le scénario et résultat attendu (ex: <code>GetItem_ShouldReturnNotFoundResult_GivenItemIsMissing</code>). <strong>Ça facilite donc l&#x27;<em>onboarding</em>!</strong></p>
<ol start="4">
<li>Cela <strong>réduit le temps de détection des bugs</strong>.</li>
</ol>
<p>On a évoqué le terme <em>short feedback loop</em> un peu plus tôt dans la discussion. Les tests unitaires sont très rapides à exécuter, ils nous donnent un <em>feedback</em> presque instantané sur la santé de la solution. Cela veut dire que l&#x27;on doit les exécuter régulièrement. Je schématise mais on a un bouton (ou un raccourci) qui nous donne un statut Vert/Rouge en quelques secondes. Actionner ce bouton doit devenir quelque chose de systématique.
Cela a déjà un intérêt pour nous en tant que développeurs mais ce n&#x27;est pas tout. On en parlera un peu plus tard!</p>
<ol start="5">
<li>Ce n&#x27;est pas un avantage direct mais plutôt un effet secondaire: <strong>faire du testing te rend meilleur</strong>.</li>
</ol>
<p>Pour faire en sorte que tu puisses écrire des tests apportant une réelle valeur, tu dois respecter certains principes. Tu dois toujours avoir une certaine couche d&#x27;abstraction pour <em>mocker</em> tes dépendances, tu dois pouvoir les injecter, tu dois limiter les responsabilités de tes composants, etc... en fait tu vas te forcer à appliquer plusieurs principes régulièrement (SOLID par exemple).
Du coup, cela te force à casser tes composants, à les découpler, à penser à leurs interations et responsabilités. Bref, à réfléchir et à te poser beaucoup de questions. Mine de rien, on parle de <em>code design</em>! Et donc, action-réaction: tu deviens meilleur au fil du temps. Cela fait très <em>Happy End</em> mais tu vois où je veux en venir.</p>
<p>🔸 Et comme c&#x27;est peu mis en place dans les entreprises, c&#x27;est vu comme &quot;nouveau&quot; et ça motive à en apprendre plus!</p>
<p>🔹 Je te rejoins sur l&#x27;aspect nouveauté mais il reste surtout présent au début lorsqu&#x27;on découvre le sujet. Mais il y a une partie d&#x27;interprétation dans tout cela: certains (comme toi) le voient comme quelque chose d&#x27;intéressant, d&#x27;autres le voient comme une corvée ou une pression supplémentaire. Tu trouveras toujours des personnes réfractaires aux tests pour des raisons diverses et variées. Peut-être qu&#x27;on aura l&#x27;occasion d&#x27;aborder les raisons qui sont généralement évoquées.</p>
<p>Pour revenir à ta question, voici les inconvénients qui me viennent à l&#x27;esprit:</p>
<ol>
<li>On l&#x27;a mentionné, il y a des pré-requis: il faut comprendre les piliers de l&#x27;orienté objet, l&#x27;injection de dépendances, les principes <a href="https://www.digitalocean.com/community/conceptual_articles/s-o-l-i-d-the-first-five-principles-of-object-oriented-design" target="_blank" rel="noopener noreferrer">SOLID</a>, etc.</li>
<li>Le fait que l&#x27;on trouve peu de projets avec de réelles <em>test suites</em> rend l&#x27;apprentissage moins accessible. Il en va de même pour trouver un coach passionné par ce sujet.</li>
<li>Il y a une courbe d&#x27;apprentissage/de progression assez importante. Tout le monde passe par une phase de frustration au début parce que l&#x27;on est pas à l&#x27;aise et on a l&#x27;impression d&#x27;être plus lent. Il faut résister et persévérer car les tests nous feront en réalité aller plus vite. On en parlera avec l&#x27;approche TDD.</li>
<li>Cela demande de la préparation : il faut réfléchir à l&#x27;architecture du projet, aux relations entre les différents composants, etc... Vu comme cela, ce n&#x27;est pas vraiment un inconvénient mais on ne peut pas (plus?) se lancer tête baissée dans un développement sans un minimum de réflexion.</li>
<li>Il y a un manque de compréhension du côté des autres équipes intervenant sur le développement du produit, notamment non-IT. On retombe toujours sur des discussions sur le <em>Return On Investement</em> (ROI) ou l&#x27;impact sur la vélocité.</li>
</ol>
<p>On entend souvent dire que &quot;cela prend du temps et que cela sera planifié plus tard&quot; ou que &quot;les développeurs n&#x27;ont pas le temps&quot; mais ces arguments ne sont pas vraiment valables.
En effet, le premier indique clairement un manque de vision et de compréhension du testing. Déjà parce que &quot;plus tard&quot; n&#x27;arrive jamais. Mais surtout, faire les tests à la fin du développement n&#x27;a aucun sens. On perd tous les avantages qu&#x27;apporte le testing. Je l&#x27;ai déjà dit mais on en parlera avec l&#x27;approche TDD.
Ensuite, le second indique un problème d&#x27;organisation. Les tests devraient être inclus dans les estimations et pas comme un travail supplémentaire à réaliser.</p>
<p class="anchor anchorWithHideOnScrollNavbar_WYt5" id="test-coverage"></p><p>🔸 Et le <span style="font-style:italic">test coverage</span>, dans
tout ça?</p><a href="#test-coverage" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a><p></p>
<p>🔹 Tester, c&#x27;est super et on ressent les bénéfices. Cependant, il faut aussi faire un statut sur l&#x27;état de la <em>test suite</em>. C&#x27;est là qu&#x27;on arrive sur le <em>code coverage</em>. C&#x27;est une métrique informative sur la progression de couverture de tests de ton application.
J&#x27;insiste vraiment sur le côté <strong>informatif</strong>. Ce serait une erreur de mesurer la qualité de la suite de tests sur base de sa couverture. C&#x27;est une métrique de quantité et non de qualité.
J&#x27;ai déjà lu des articles sur des sociétés qui ont intégré la valeur de <em>code coverage</em> dans les objectifs des développeurs et cela a incité les développeurs à utiliser de faux tests pour faire gonfler le coverage.</p>
<p>Le seul moyen de vérifier la qualité d&#x27;une <em>test suite</em> d&#x27;un projet, c&#x27;est de se poser quelques questions:</p>
<ul>
<li>Est-ce que le temps de développement général des fonctionnalités reste approximativement le même avec le temps?</li>
<li>Est-ce que la quantité de bugs trouvés en production diminue avec le temps?</li>
<li>Est-ce que tu arrives à facilement accueillir une nouvelle ressource au sein de l&#x27;équipe de développement?</li>
<li>Est-ce que les développeurs ont confiance en leur <em>test suite</em>? Est-ce qu&#x27;elle est représentative de l&#x27;état de santé de la solution? Est-ce qu&#x27;un rond vert garantit vraiment qu&#x27;un composant fonctionne?</li>
</ul>
<p>Si tu es en mesure de répondre &quot;oui&quot; à toutes ces questions, félicitations! Tu peux être fier de la <em>test suite</em> que tu as mis en place.
Le souci? C&#x27;est difficile d&#x27;avoir une réponse à ces questions alors que tu dois rendre des comptes <em>day one</em>... Tu remarques d&#x27;ailleurs que les trois premières font référence au <strong>temps</strong>.</p>
<p class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cost"></p><p>🔸 Bon sinon... question coût, qu&#x27;est-ce qu&#x27;il en est? Parce que finalement,
écrire un test unitaire, c&#x27;est tout de même écrire du code. Ça coûte!</p><a href="#cost" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a><p></p>
<p>🔹 Je vois là où tu veux en venir. Non, cela ne coûte pas plus sauf si tu factures au caractère!
Même si tu écris plus de code, tu es vraiment gagnant et pas que sur l&#x27;aspect temps. Je t&#x27;ai dit qu&#x27;on devait parler de TDD? Parce que cela te fait même gagner du temps à court-terme. Bref.
Développer une fonctionnalité peut te prendre un peu plus de temps en sachant que cela dépendra surtout de ton aisance avec l&#x27;écriture de tests. D&#x27;un autre côté, cela va surtout te &quot;sauver la vie&quot; pas mal de fois parce que tu vas éviter énormement de bugs qui, en temps normal,
seraient arrivés bien plus tard dans ton <em>process</em>, lors des tests utilisateur sur un environnement de QA ou en production.
Toi qui voulais parler d&#x27;argent, <strong>plus un bug est découvert tard, plus il coûte cher</strong>:</p>
<figure><a href="https://deepsource.io/blog/exponential-cost-of-fixing-bugs/" target="_blank"><img src="https://tinaeldevresse.eu/fr/img/relative-costs-bugs-fixing.png" alt="Coût de correction des bugs" type="image" url="https://deepsource.io/blog/exponential-cost-of-fixing-bugs/"></a><figcaption class="legend_Ecw3"><p>Le coût de correction d&#x27;un bug sur base du moment où il a été détecté, sourcé chez <a href="https://deepsource.io/blog/exponential-cost-of-fixing-bugs/">DeepSource</a>!</p></figcaption></figure>
<p>Et c&#x27;est tout à fait normal.</p>
<p>On peut reparler de la <em>fast feedback loop</em>: si un bug est découvert par un test unitaire, c&#x27;est en local sur ta machine, juste après le changement (n&#x27;oublie pas de <em>rebuild</em> et de <em>rerun</em> ta suite de tests). Il est identifié rapidement et corrigé rapidement.
À contrario, un bug qui passe en production... il est découvert par un utilisateur qui remonte le problème à ta <em>product team</em> qui elle doit analyser le <em>feedback</em> et ouvrir un ticket dans ton <em>backlog</em>. Ce ticket, il va être priorisé par ton <em>Product Owner</em> pour être inclus dans la prochaine itération puis il sera assigné à un développeur. En admettant que ce ne soit pas toi, il y aura une phase d&#x27;investigation (reproduction du bug), une phase de correction de bug et après il doit repartir sur tous les environnements et être validé par des <em>Quality Assurance Users</em>.</p>
<p>J&#x27;ai volontairement pris un cas extrême pour montrer le pire scénario mais c&#x27;est aussi la façon d&#x27;être le plus explicite sur le problème.
Ce qu&#x27;il est important de retenir, c&#x27;est qu&#x27;un test peut faire gagner beaucoup de temps à beaucoup de personnes, aussi simple soit-il.</p>
<p><em>ndlr: pour en savoir plus sur les raisons qui font qu&#x27;un logiciel a des bugs, n&#x27;hésitez pas à consulter <a href="https://www.softwaretestinghelp.com/why-does-software-have-bugs" target="_blank" rel="noopener noreferrer">cette page</a> et <a href="https://www.google.com/search?q=why+do+softwares+have+bugs" target="_blank" rel="noopener noreferrer">d&#x27;autres sur le web</a>!</em></p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="details">En détails<a href="#details" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h2>
<p class="anchor anchorWithHideOnScrollNavbar_WYt5" id="black-and-white-boxes"></p><p>🔸 Ok! Et si on parlait maintenant de<!-- --> <!-- -->
<span style="font-style:italic">black box</span> et<!-- --> <!-- -->
<span style="font-style:italic">white box testing</span>?</p><a href="#black-and-white-boxes" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a><p></p>
<p>🔹 J&#x27;aime les schémas, tu aimes les schémas? C&#x27;est bien les schémas!</p>
<figure><img src="https://tinaeldevresse.eu/fr/img/black-white-box-testing.png" alt="Black and white box testing" type="image" style="border:.5em solid black"><figcaption class="legend_Ecw3"><p>Les différences entre <span style="font-style:italic">black box</span> <!-- -->
et <span style="font-style:italic">white box testing</span></p></figcaption></figure>
<p>Le <strong>black box testing</strong>, c&#x27;est donner une information d&#x27;entrée au SUT et vérifier l&#x27;information de sortie. C&#x27;est aussi simple que ça: on ne prend pas en compte ce qu&#x27;il se passe à l&#x27;intérieur de la méthode.
Il y a un cas précis où ce type de testing sera obligatoire: les méthodes pures. Ces méthodes n&#x27;ayant aucune dépendance ou variables partagées, elles n&#x27;ont donc aucun <em>side effect</em>. Le <strong>black box testing</strong> est donc une évidence mais cela rend aussi le test extrêmement robuste car rien ne vient impacter le résultat du test.</p>
<p>Prenons par exemple une méthode <code>Sum</code> d&#x27;une classe <code>Calculator</code>. On est exactement sur le scénario mentionné plus haut:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">tests/CalculatorTests.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">TestClass</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">CalculatorTests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">TestMethod</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Sum_Should_ReturnTheSumOfTheTwoNumbers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token class-name">Calculator</span><span class="token plain"> calculator </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token class-name keyword" style="color:#00009f">int</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> calculator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		Assert</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AreEqual</span><span class="token punctuation" style="color:#393A34">(</span><span class="token named-parameter punctuation" style="color:#393A34">expected</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token named-parameter punctuation" style="color:#393A34">actual</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier dans le presse-papier" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>On ne connaît pas l&#x27;implémentation de la méthode, mais on a écrit un test. On lui donne des valeurs en entrée, et on vérifie la valeur de sortie.
Pour le reste des scénarios, je trouve dommage de s&#x27;arrêter là. C&#x27;est une préférence personnelle, je trouve le <strong>white box testing</strong> plus pertinent en tant que <em>Mockist</em>.</p>
<p>De l&#x27;autre côté, on a donc ce <strong>white box testing</strong>. À première vue, c&#x27;est la même chose: on donne un <em>input</em> et on vérifie l&#x27;<em>output</em>. Mais on va aussi vérifier ce qu&#x27;il se passe à l&#x27;intérieur du SUT.
On peut donc vérifier que le SUT a bien fait appel à sa dépendance, que la valeur a bien été mise dans un cache, sauvegardée dans un repo, qu&#x27;un event a bien été émis, etc.
Cela nous permet de vérifier chaque <em>behavior</em> avec ses <em>side effects</em>.</p>
<p class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-to-write"></p><p>🔸 La question que tous se posent... Comment écrire de bons tests unitaires?</p><a href="#how-to-write" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a><p></p>
<p>🔹 Je ne pense pas qu&#x27;il y ait de bons ou de mauvais tests unitaires... Evidemment que si!
Il faut réfléchir avant sur ce que tu veux faire. Ça peut paraître bête dit comme ça mais <em>think before you do</em>. C&#x27;est que j&#x27;expliquais lorsque je parlais du fait que faire des tests te rend meilleur.
Si tu veux faire des tests efficaces, il faut réfléchir sur la façon dont tes composants vont communiquer entre eux. En fait, tes tests seront efficaces à partir du moment où ils seront faciles à faire. Et si tu te rends compte qu&#x27;ils ne le sont pas, c&#x27;est qu&#x27;il y a un soucis dans ton code.</p>
<p>Exemple: j&#x27;ai un <em>service</em> qui doit créer un utilisateur. <strong>Avant d&#x27;écrire mon test</strong>, je dois me poser quelques questions: quelles sont les responsabilités de mon service?
Est-il responsable d&#x27;envoyer une requête HTTP à un fournisseur externe pour récupérer des informations? Est-il responsable de la persistence en base de données? Est-il responsable du <em>logging</em>?
<em>Divide &amp; Conquer</em>: une dépendance ici, une là, et une autre là... Au final, que reste-t-il dans mon service? L&#x27;orchestration d&#x27;un processus délégué à différentes dépendances (ex: client http, repository, logger, etc) et éventuellement une modification de l&#x27;état d&#x27;une entité. C&#x27;est tout.</p>
<p>Au final, un &quot;bon&quot; test doit:</p>
<ul>
<li>te protéger contre les régressions ;</li>
<li>être résistant au refactoring ;</li>
<li>te donner un feedback rapide ;</li>
<li>être maintenable.</li>
</ul>
<p class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tips-to-start"></p><p>🔸 Et, sinon... T&#x27;as des conseils pour se lancer dans le testing unitaire?</p><a href="#tips-to-start" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a><p></p>
<p>🔹 Je recommande aux personnes qui veulent démarrer le testing de commencer directement avec le <em>Test Driven Development</em>.
Si le test est écrit après l&#x27;implémentation, c&#x27;est pas vraiment objectif car tu connais déjà l&#x27;implémentation donc ton test est fortement lié à ton implémentation. De plus, le code fonctionne déjà donc le test sera perçu comme une perte de temps. Mais surtout: on a bénéficié d&#x27;aucun avantage du testing lors de la phase d&#x27;implémentation.</p>
<p>Pour cela, vous n&#x27;êtes pas seul. Il existe des tonnes de resources disponibles pour vous aider.
Voici plusieurs livres que j&#x27;aurais aimé avoir lus au début de ma carrière:</p>
<ul>
<li>&quot;Test Driven Development - By Example&quot; par Kent Beck.</li>
<li>&quot;Unit Testing - Principles, Practices and Patterns&quot; par Vladimir Khorikov.</li>
</ul>
<p>Également, voici un site rempli de conseils et astuces sur TDD avec un grand nombre de katas pour progresser: <a href="http://www.tddbuddy.com/" target="_blank" rel="noopener noreferrer">TDD Buddy</a>.</p>
<p>En parlant de katas, faites des katas. Faites pleins de katas et faites en à plusieurs (<em>pair</em> et/ou <em>mob programming</em>) si vous en avez la possibilité. C&#x27;est fun et c&#x27;est très formatteur, notamment sur le fait de démarrer avec des exercices simples et progressivement augmenter la difficulté jusqu&#x27;à se retrouver avec des situations similaires à ce que l&#x27;on peut trouver dans des projets réels. En plus de <a href="http://www.tddbuddy.com/" target="_blank" rel="noopener noreferrer">TDD Buddy</a>, je pourrais recommander <a href="https://www.codewars.com/" target="_blank" rel="noopener noreferrer">Code Wars</a> si vous êtes en manque d&#x27;inspiration.
Sans forcément faire de l&#x27;auto-promotion, vous pouvez aussi trouver quelques katas sur mon <a href="https://github.com/Tr00d/" target="_blank" rel="noopener noreferrer">GitHub</a>.</p>
<p>Un dernier conseil pour démarrer le testing, on peut se référer à ce qu&#x27;on appelle le triple A (AAA), qui signifie <em>Arrange, Act, Assert</em>, pour rendre les tests plus clairs et organisés. Le but est de diviser son test unitaire en 3 parties distinctes:</p>
<ol>
<li><em>arrange</em> : c&#x27;est le scénario, la partie où tu prépares les données <em>input</em> de ta méthode ;</li>
<li><em>act</em> : c&#x27;est l&#x27;action, le fait de réaliser l&#x27;appel à la méthode que tu vas tester ;</li>
<li><em>assert</em> : c&#x27;est la vérification du <em>behavior</em>, là partie où tu vérifies l&#x27;<em>output</em> ou les <em>side effects</em>.</li>
</ol>
<p class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bad-smells"></p><p>🔸 Quels sont les &quot;bad smells&quot; dans l&#x27;unit testing?</p><a href="#bad-smells" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a><p></p>
<p>🔹 J&#x27;en vois quelques-uns...</p>
<ul>
<li>une partie <em>arrange</em> qui fait 15 lignes... C&#x27;est trop compliqué. On voit clairement que la méthode testée fait trop de choses car le scénario est trop compliqué à mettre en place!</li>
<li>On dit qu&#x27;<strong>un test ne doit avoir qu&#x27;une et une seule raison d&#x27;échouer</strong>. Un test ne devrait contenir qu&#x27;un seul <em>assert</em>.</li>
<li>Le fait que tu aies du mal à écrire des tests unitaires, non pas à cause du fait que tu n&#x27;aies pas la connaissance nécessaire mais plutôt en rapport au code à tester... c&#x27;est qu&#x27;il y a un soucis au niveau de ton composant. Alors, prends du recul et penses aux responsabilités.</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="more-stuff">Pour aller plus loin<a href="#more-stuff" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h2>
<p class="anchor anchorWithHideOnScrollNavbar_WYt5" id="libraries"></p><p>🔸 Tu as des librairies intéressantes en tête pour faciliter le travail?</p><a href="#libraries" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a><p></p>
<p>🔹 Oui. Pour moi, on peut considérer trois groupes de librairies:</p>
<ol>
<li>les librairies de testing qui permettent de générer des tests ;</li>
<li>les librairies de mocking qui permettent de surcharger le comportement de tes dépendances et de les monitorer ;</li>
<li>les librairies de génération de données.</li>
</ol>
<p>Pour ma part:</p>
<table><thead><tr><th style="text-align:center"><strong>Frameworks de test</strong></th><th style="text-align:center"><strong>Librairies de mocking</strong></th><th style="text-align:center"><strong>Librairies de génération de données</strong></th></tr></thead><tbody><tr><td style="text-align:center"><a href="https://www.nuget.org/packages/MSTest.TestFramework/" target="_blank" rel="noopener noreferrer">MSTest</a></td><td style="text-align:center"><a href="https://www.nuget.org/packages/Moq/" target="_blank" rel="noopener noreferrer">Moq</a></td><td style="text-align:center"><a href="https://www.nuget.org/packages/AutoFixture/" target="_blank" rel="noopener noreferrer">AutoFixture</a></td></tr><tr><td style="text-align:center"><a href="https://www.nuget.org/packages/NUnit/" target="_blank" rel="noopener noreferrer">NUnit</a></td><td style="text-align:center"><a href="https://www.nuget.org/packages/Ninject/" target="_blank" rel="noopener noreferrer">NInject</a></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><a href="https://www.nuget.org/packages/xunit/" target="_blank" rel="noopener noreferrer">XUnit</a></td><td style="text-align:center"><a href="https://www.nuget.org/packages/WireMock.Net/" target="_blank" rel="noopener noreferrer">WireMock</a></td><td style="text-align:center"></td></tr></tbody></table>
<p>🔸 Sur ce point-ci particulièrement, j&#x27;aimerais mettre en avant le fait qu&#x27;il existe aussi des librairies de test pour le <em>front-end</em>. En fait, le testing unitaire n&#x27;est pas réservé aux développeurs
<em>back-end</em>. On citera notamment <a href="https://www.npmjs.com/package/jest" target="_blank" rel="noopener noreferrer">Jest</a>, <a href="https://www.npmjs.com/package/mocha" target="_blank" rel="noopener noreferrer">Mocha</a>, <a href="https://www.npmjs.com/package/cypress" target="_blank" rel="noopener noreferrer">Cypress</a> et <a href="https://www.npmjs.com/package/jasmine" target="_blank" rel="noopener noreferrer">Jasmine</a> comme librairies fortement liées au testing dans des applications JavaScript.</p>
<p class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-is-tdd"></p><p>Du coup, tu n&#x27;arrêtes pas d&#x27;en parler. C&#x27;est quoi le<!-- --> <!-- -->
<span style="font-style:italic">Test Driven Development</span> (TDD)?</p><a href="#what-is-tdd" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a><p></p>
<p>🔹 Je suis content que tu poses enfin la question! C&#x27;est pas comme si je t&#x27;avais tendu la perche plus d&#x27;une fois... C&#x27;est la joie, le bonheur, la réponse ultime au sens de la vie, c&#x27;est tout ça!
Non, je rigole. En fait, c&#x27;est une façon de mettre les tests au centre de ce que tu fais. On a parlé de tous les points positifs de faire des tests unitaires et aussi du fait qu&#x27;on les perdait si on faisait les tests à la fin sans forcément aller dans le détail.
En fait, la meilleure façon de bénéficier des avantages des tests, c&#x27;est de les faire en premier mais ce n&#x27;est pas que ça. Ce n&#x27;est pas d&#x27;abord faire tous les tests puis ensuite faire l&#x27;implémentation.
Non, il y vraiment un aspect itératif que l&#x27;on retrouve d&#x27;ailleurs dans l&#x27;Agilité. Tu y vas étape par étape (<em>baby steps</em>), tu ajoutes de nouveaux <em>behaviors</em> en garantissant que ceux précédemment ajoutés fonctionnent toujours. Le filet de sécurité s&#x27;agrandit petit à petit naturellement.
On peut présenter cela différemment: imaginons une échelle. Cela sera toujours plus facile de la monter marche par marche que de les monter trois par trois.</p>
<p>J&#x27;ajouterais que contrairement aux idées reçues, TDD ne rend pas la durée de développement plus longue, bien au contraire. Par exemple, il n&#x27;est pas nécessaire d&#x27;exécuter la solution pour savoir que le code fonctionne car il a entièrement été développé sur base de tests.</p>
<figure><img src="https://tinaeldevresse.eu/fr/img/test-driven-development.png" alt="Cycle du TDD" type="image" style="border:.5em solid black"><figcaption class="legend_Ecw3"><p>Le cycle de développement sous TDD</p></figcaption></figure>
<p>La première étape, c&#x27;est l&#x27;écriture d&#x27;<strong>un</strong> test unitaire. Normalement, ce test doit <em>obligatoirement</em> échouer puisqu&#x27;aucune implémentation n&#x27;a été écrite pour qu&#x27;il réussise.
L&#x27;étape suivante, c&#x27;est donc d&#x27;écrire le code qui permet de faire passer le test au vert. Et là, c&#x27;est très important de savoir que ce passage de rouge vers le vert doit être <strong>le plus court possible</strong>. C&#x27;est le moment où on à le droit d&#x27;écrire du code &quot;moche&quot;, d&#x27;<em>hardcoder</em> un résultat, de dupliquer, de coller une réponse de StackOverflow, etc. Cela peut paraître bizarre au début mais il y a un vrai intérêt: vérifier que l&#x27;ajout d&#x27;un nouveau <em>behavior</em> est possible sans casser tout ce qui a été fait auparavant.
L&#x27;étape suivante, c&#x27;est le refactoring. On a fait un code horrible, il faut maintenant faire quelque chose de propre. J&#x27;ai parlé plus tôt de refactoring plus simple et sécurisé: on y est! On a notre <em>green light</em> et le <em>behavior</em> est garanti tant que cette <em>light</em> reste <em>green</em>. On a notre <em>fast feedback loop</em> à portée de main (ou de clic, ou de raccourci) pour savoir si tout est ok. Tu me suis?
Ensuite, on atteint la fin du cycle. Cela veut dire une chose: on recommence.</p>
<p>🔸 Je vais fournir un petit exemple pour que tout le monde se situe! Je vais faire ça avec un calculateur de longueur de chaîne de caractères tiens, c&#x27;est simple à réaliser.
Donc, je commence par écrire le test unitaire:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">tests/StringCalculatorTests.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">TestClass</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">StringCalculatorTests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">[</span><span class="token attribute class-name">TestMethod</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Length_ShouldReturn_CorrectLength</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token class-name">StringCalculator</span><span class="token plain"> calculator </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token class-name keyword" style="color:#00009f">int</span><span class="token plain"> result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> calculator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Length</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &quot;string&quot; fait 6 caractères de long, non?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		Assert</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AreEqual</span><span class="token punctuation" style="color:#393A34">(</span><span class="token named-parameter punctuation" style="color:#393A34">expected</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token named-parameter punctuation" style="color:#393A34">actual</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier dans le presse-papier" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Le test échoue parce que je n&#x27;ai pas encore créé la classe <code>StringCalculator</code>. Prochaine étape!</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">src/StringCalculator.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">StringCalculator</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">int</span><span class="token plain"> Length </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token plain"> str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier dans le presse-papier" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Ici, nous sommes donc à l&#x27;étape verte. On doit donc passer à l&#x27;étape bleue.</p>
<p>🔹 J&#x27;ajouterais que ton code est super moche vu que tu as <em>hardcodé</em> la valeur. Mais c&#x27;est bien! C&#x27;est le but!</p>
<p>🔸 La plus longue: réaliser un refactoring du code qui nous permet de répondre au besoin demandé (calculer la longueur d&#x27;une chaîne de caractères) tout en ne cassant pas le test:</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">src/StringCalculator.cs</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">StringCalculator</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token return-type class-name keyword" style="color:#00009f">int</span><span class="token plain"> Length </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name keyword" style="color:#00009f">string</span><span class="token plain"> str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> str</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// la manière la plus propre de renvoyer la longueur d&#x27;une chaîne de caractères en C#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier dans le presse-papier" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Et voilà! Nous pouvons commencer l&#x27;écriture d&#x27;un nouveau test unitaire.</p>
<p>🔹 C&#x27;est un exemple assez simple mais tu y es. Il faut bien noter qu&#x27;il y a tout de même des règles à respecter avec TDD mais je pourrais en parler pendant des heures alors on va s&#x27;arrêter ici!</p>
<p class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-is-tcr"></p><p>🔸 D&#x27;accord! D&#x27;ailleurs, j&#x27;ai ouïe dire que t&#x27;as récemment appris le<!-- --> </p><span style="font-style:italic"><p>Test &amp;&amp; Commit || Revert</p></span> <p>(TCR). Tu sais expliquer en quoi ça consiste?</p><a href="#what-is-tcr" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a><p></p>
<p>🔹 Exact, j&#x27;ai eu la chance de prendre connaissance de cette pratique via un <em>workshop</em>. Pour schématiser, disons que c&#x27;est une vision extrême de TDD. Le meilleur moyen de l&#x27;utiliser est avec un script séparé.
Ce script va analyser ta solution à chaque sauvegarde et va ensuite exécuter tous tes tests. Si tous tes tests sont vert, il crée un commit qui représente un état stable de ta branche (Test &amp;&amp; Commit).
Si tu as un seul test qui ne passe plus, il fait un rollback pour revenir à l&#x27;état du dernier commit (Revert), qui lui est stable.
Cela te force à avancer en <em>baby steps</em> et une chose est mise en évidence: c&#x27;est ton dernier changement qui a cassé quelque chose.</p>
<p>Au début, tu passes par une phase de frustration parce que tu peux perdre du code mais justement, cela t&#x27;incite à avancer petit à petit pour limiter tes pertes. Plus tes <em>steps</em> sont petites, moins tu risques de perdre du code. C&#x27;est un super enseignement en complément de TDD.
Losque tu deviens relativement à l&#x27;aise avec tout ça, tu remarques que tu avances de plus en plus vite et surtout, tu as toujours une branche qui fonctionne.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">​</a></h2>
<p>🔸 Un dernier mot pour clôturer cette interview?</p>
<p>🔹 &quot;Victoriae mundis et mundis lacrima&quot;, ca ne veut absolument rien dire mais je trouve que c&#x27;est assez dans le ton.
Plus sérieusement, ça fait déjà un moment qu&#x27;on discute mais on a seulement gratté la surface. Il reste beaucoup de points à aborder sur le testing. Je conseillerais donc vivement aux lecteurs d&#x27;être curieux sur le sujet, de lire et surtout de pratiquer. N&#x27;hésitez pas à demander de l&#x27;aide autour de vous.
Et sinon, le testing, ça vous tente?</p>
<figure><img src="https://tinaeldevresse.eu/fr/img/developers-deliver-working-solutions.jpg" alt="Developers deliver working solutions, not testable code" type="image" style="width:50%;border:.1em grey solid"><figcaption class="legend_Ecw3"></figcaption></figure>
<div class="formContainer_ssZr"><h3>Reste à jour, inscris-toi à ma newsletter!</h3><div class="inputContainer_rIzC"><input class="input_xw7i" type="email" placeholder="Entre ton adresse email" required="" autocomplete="email"><a class="submit_jbGj tooltip" rel="noopener" type="submit"><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="paper-plane" class="svg-inline--fa fa-paper-plane fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M440 6.5L24 246.4c-34.4 19.9-31.1 70.8 5.7 85.9L144 379.6V464c0 46.4 59.2 65.5 86.6 28.6l43.8-59.1 111.9 46.2c5.9 2.4 12.1 3.6 18.3 3.6 8.2 0 16.3-2.1 23.6-6.2 12.8-7.2 21.6-20 23.9-34.5l59.4-387.2c6.1-40.1-36.9-68.8-71.5-48.9zM192 464v-64.6l36.6 15.1L192 464zm212.6-28.7l-153.8-63.5L391 169.5c10.7-15.5-9.5-33.5-23.7-21.2L155.8 332.6 48 288 464 48l-59.4 387.3z"></path></svg><span class="tooltipText">Submit!</span></a></div></div></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/fr/blog/tags/test">test</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/fr/blog/tags/test-unitaire">test unitaire</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/fr/blog/tags/programmation">programmation</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/hunteroi/tinaeldevresse.eu/tree/master/blog/2022-01-01-unit-testing.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Éditer cette page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Pagination des articles du blog"><a class="pagination-nav__link pagination-nav__link--prev" href="/fr/blog/why-did-i-switch-to-clean-architecture"><div class="pagination-nav__sublabel">Article le plus récent</div><div class="pagination-nav__label">Quelle architecture j&#x27;utilise pour mes projets?</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/fr/blog/what-is-a-container"><div class="pagination-nav__sublabel">Article le plus ancien</div><div class="pagination-nav__label">Qu&#x27;est-ce qu&#x27;un conteneur?</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#presentation" class="table-of-contents__link toc-highlight">Présentation</a></li><li><a href="#topic" class="table-of-contents__link toc-highlight">Le sujet</a><ul><li><a href="#first-encounter" class="table-of-contents__link toc-highlight">Première rencontre</a></li><li><a href="#what-is-it" class="table-of-contents__link toc-highlight">Qu'est-ce que c'est</a></li><li><a href="#hierarchy-position" class="table-of-contents__link toc-highlight">Où ça se situe dans la "hiérarchie des tests"</a></li><li><a href="#objective" class="table-of-contents__link toc-highlight">But du testing unitaire</a></li><li><a href="#pros-and-cons" class="table-of-contents__link toc-highlight">Avantages et inconvénients</a></li><li><a href="#test-coverage" class="table-of-contents__link toc-highlight">Test Coverage</a></li><li><a href="#cost" class="table-of-contents__link toc-highlight">Le coût</a></li></ul></li><li><a href="#details" class="table-of-contents__link toc-highlight">Plus en détails</a><ul><li><a href="#black-and-white-boxes" class="table-of-contents__link toc-highlight">Black box &amp; white box, késako</a></li><li><a href="#how-to-write" class="table-of-contents__link toc-highlight">Comment en écrire efficacement</a></li><li><a href="#tips-to-start" class="table-of-contents__link toc-highlight">Tips pour se lancer</a></li><li><a href="#bad-smells" class="table-of-contents__link toc-highlight">Les "Bad Smells"</a></li></ul></li><li><a href="#more-stuff" class="table-of-contents__link toc-highlight">Pour aller plus loin</a><ul><li><a href="#libraries" class="table-of-contents__link toc-highlight">Librairies facilitant l'implémentation</a></li><li><a href="#what-is-tdd" class="table-of-contents__link toc-highlight">Le Test Driven Development</a></li><li><a href="#what-is-tcr" class="table-of-contents__link toc-highlight">Le Test &amp;&amp; Commit || Revert </a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://twitter.com/tinaeldvs"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://linkedin.com/in/tinael-devresse"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener" href="https://hunteroi.github.io"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener" href="https://opencollective.com/hunteroi"><svg role="img" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="opencollective" class="svg-inline--fa fa-opencollective fa-w-16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path fill="currentColor" d="M209.765 128.15c0 16.013-4.9 31.34-13.266 44.575l33.447 33.447a128.918 128.918 0 0 0 25.783-77.35c0-29.265-9.754-55.751-26.47-77.336l-32.776 32.729a79.442 79.442 0 0 1 13.267 43.888l.015.047Z"/><path fill="currentColor" d="M127.513 210.355c-45.367-.086-82.125-36.838-82.22-82.205c.069-45.386 36.835-82.166 82.22-82.252c16.732 0 32.058 4.901 44.607 13.267l32.744-32.776A128.965 128.965 0 0 0 127.514.636C57.123.636 0 57.76 0 128.15c0 70.359 57.124 127.513 127.513 127.513a125.126 125.126 0 0 0 77.351-26.501l-33.447-33.431c-11.861 9.754-27.157 14.624-43.904 14.624Z"/></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><span style="font-size: 10px;">Copyright ©2020-présent Tinaël Devresse. Fait avec Docusaurus.</span></div></div></div></footer></div>
</body>
</html>